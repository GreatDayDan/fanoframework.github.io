<!DOCTYPE html>
<!--
Hyperspace by HTML5 UP
html5up.net | @ajlkn
Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
<head>
    <title>Working with Controllers - Fano Framework</title>
    <meta charset="utf-8" />
    <meta name="description" content="Tutorial on how to work with controllers in Fano Framework">
    <meta name="keywords" content="fano, web application, framework, pascal, programming, language, free pascal">
    <meta name="robots" content="index, follow"/>
    <meta property="og:title" content="Working with Controllers"/>
    <meta property="og:site_name" content="Fano Framework"/>
    <meta property="og:url" content="http://localhost:4000/working-with-controllers/"/>
    <meta property="og:description" content="Tutorial on how to work with controllers in Fano Framework"/>
    <meta property="og:type" content="website"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="shortcut icon" href="/assets/images/favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="/assets/css/main.css" />
    <noscript><link rel="stylesheet" href="/assets/css/noscript.css" /></noscript>
</head>
<body class="is-preload">


<!-- Sidebar -->
<section id="sidebar">
    <div class="inner">
        <nav>
            <ul>
                
                    <h3>Getting Started</h3>
                      <ul class="alt">
                        
                          <li><a href="/getting-started">Getting Started</a></li>
                        
                          <li><a href="/tutorials">Step By Step Tutorials</a></li>
                        
                      </ul>
                
                    <h3>Basic</h3>
                      <ul class="alt">
                        
                          <li><a href="/getting-started">Getting Started</a></li>
                        
                      </ul>
                
            </ul>
        </nav>
    </div>
</section>


<!-- Wrapper -->
<div id="wrapper">
    <!-- Main -->
    <section id="main" class="wrapper">
        <div class="inner">
            <h1 class="major">Working with Controllers</h1>

<h2 id="irequesthandler-interface">IRequestHandler interface</h2>

<p>When web application receives request from web server, it will be given
request uri of resource that user is requesting.
Dispatcher parses request uri to find matching route handler that will handle this request. If no handler available to handle it, HTTP 404 will be returned.</p>

<p>Interface <code class="highlighter-rouge">IRequestHandler</code>, declared in unit <code class="highlighter-rouge">fano.pas</code>, is basis of request handler implementation in Fano Framework. It consists of <code class="highlighter-rouge">handleRequest()</code> method that implementor class must provide.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function handleRequest(
    const request : IRequest;
    const response : IResponse;
    const args : IRouteArgsReader
) : IResponse;
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">request</code>, current request object</li>
  <li><code class="highlighter-rouge">response</code>, response object</li>
  <li><code class="highlighter-rouge">args</code>, current route arguments. Read <a href="/working-with-router">Working with Router</a> for more information about purpose of this object.</li>
</ul>

<p><code class="highlighter-rouge">handleRequest()</code> should return instance of response that will be used as response to request. You can return response given by dispatcher or create entirely new response instance.</p>

<p>Fano Framework provides <code class="highlighter-rouge">TAbstractController</code> as base abstract class that implements <code class="highlighter-rouge">IRequestHandler</code> and also base controller in <code class="highlighter-rouge">TController</code> class which derived from <code class="highlighter-rouge">TAbstractController</code> class.</p>

<p><code class="highlighter-rouge">TAbstractController</code> is an abstract class. You need to derive and implements its <code class="highlighter-rouge">handleRequest()</code> method to be able to use it. This class is useful, for example, in following situation:</p>

<ul>
  <li>you do not need to use view</li>
  <li>you prefer to compose response by yourself, for example, to output JPEG image response.</li>
</ul>

<p><code class="highlighter-rouge">TController</code> is concrete class and extends <code class="highlighter-rouge">TAbstractController</code> capability by adding view and view parameters to allow, for example, to use template.</p>

<p>But of course, you are free to implements your own.</p>

<h2 id="using-tcontroller-class">Using TController class</h2>

<p><code class="highlighter-rouge">TController</code> class is built-in class that provides ability for route handler to works with view and middlewares.</p>

<p>Except for simple route handler which display static view, you are very likely need to extends this class as <code class="highlighter-rouge">TController</code> by defaut, does few things, which is
returning response from <code class="highlighter-rouge">IView</code> instance.</p>

<h2 id="creating-tcontroller-class">Creating TController class</h2>

<p><code class="highlighter-rouge">TController</code> constructor expects 2 parameters</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>constructor TController.create(
    const viewInst : IView;
    const viewParamsInst : IViewParameters
);
</code></pre></div></div>
<ul>
  <li><code class="highlighter-rouge">viewInst</code>, view to be used, i.e., instance of class that implements <code class="highlighter-rouge">IView</code> interface.</li>
  <li><code class="highlighter-rouge">ViewParamsInst</code>, view parameters, i.e., instance of class that implements <code class="highlighter-rouge">IViewParameters</code> interface.</li>
</ul>

<p><code class="highlighter-rouge">viewInst</code> and <code class="highlighter-rouge">viewParamsInst</code> that you pass during class construction, will be available from inherited class as <code class="highlighter-rouge">gView</code> and <code class="highlighter-rouge">viewParams</code> respectively.</p>

<p>For more information regarding view and view parameters, read <a href="/working-with-views">Working with Views</a>.</p>

<h2 id="implements-controller-logic">Implements controller logic</h2>

<p><code class="highlighter-rouge">handleRequest()</code> is method that will be invoked by dispatcher to handle request, so you mostly do not call it directly.
This method is part of <code class="highlighter-rouge">IRequestHandler</code> interface. Dispatcher will pass request and response instance to this method.</p>

<p><code class="highlighter-rouge">TController</code> class provides basic implementation of this method, which is, to return view output. Fano Framework provides some built-in response class that you can use such HTML response, JSON response or binary response (for example to output image). Of course, you are free to implements your own output response.</p>

<h2 id="explore-more">Explore more</h2>

<ul>
  <li><a href="/working-with-request">Working with Request</a></li>
  <li><a href="/working-with-response">Working with Response</a></li>
  <li><a href="/working-with-views">Working with Views</a></li>
  <li><a href="/working-with-models">Working with Models</a></li>
  <li><a href="/working-with-router">Working with Router</a></li>
</ul>

<ul class="actions">
    <li><a href="/documentation" class="button">Documentation</a></li>
</ul>

        </div>
    </section>
</div>


    <!-- Scripts -->
    <script src="/assets/js/jquery.min.js"></script>
    <script src="/assets/js/jquery.scrollex.min.js"></script>
    <script src="/assets/js/jquery.scrolly.min.js"></script>
    <script src="/assets/js/browser.min.js"></script>
    <script src="/assets/js/breakpoints.min.js"></script>
    <script src="/assets/js/util.js"></script>
    <script src="/assets/js/main.js"></script>

</body>
</html>

