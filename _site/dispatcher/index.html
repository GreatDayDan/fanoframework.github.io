<!DOCTYPE html>
<!--
Hyperspace by HTML5 UP
html5up.net | @ajlkn
Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
<head>
    <title>Dispatcher - Fano Framework</title>
    <meta charset="utf-8" />
    <meta name="description" content="Request dispatcher in Fano Framework">
    <meta name="keywords" content="fano, web application, framework, pascal, programming, language, free pascal">
    <meta name="robots" content="index, follow"/>
    <meta property="og:title" content="Dispatcher"/>
    <meta property="og:site_name" content="Fano Framework"/>
    <meta property="og:url" content="http://localhost:4000/dispatcher/"/>
    <meta property="og:description" content="Request dispatcher in Fano Framework"/>
    <meta property="og:type" content="website"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="shortcut icon" href="/assets/images/favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="/assets/css/main.css" />
    <noscript><link rel="stylesheet" href="/assets/css/noscript.css" /></noscript>
</head>
<body class="is-preload">


<!-- Sidebar -->
<section id="sidebar">
    <div class="inner">
        <nav>
            <ul>
                
                    <h3>Getting Started</h3>
                      <ul class="alt">
                        
                          <li><a href="/getting-started">Getting Started</a></li>
                        
                          <li><a href="/tutorials">Step By Step Tutorials</a></li>
                        
                      </ul>
                
                    <h3>Basic</h3>
                      <ul class="alt">
                        
                          <li><a href="/getting-started">Getting Started</a></li>
                        
                      </ul>
                
            </ul>
        </nav>
    </div>
</section>


<!-- Wrapper -->
<div id="wrapper">
    <!-- Main -->
    <section id="main" class="wrapper">
        <div class="inner">
            <h1 class="major">Dispatcher</h1>

<h2 id="dispatcher-task">Dispatcher task</h2>

<p>In general, task of a dispatcher is quite simple. Given request URI and HTTP method, it asks router to find instance of class that will handle the request, build middlewares, passing all relevant information and execute it.</p>

<p>A dispatcher in Fano Framework must implements <code class="highlighter-rouge">IDispatcher</code> interface.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>IDispatcher = interface
    ['{F13A78C0-3A00-4E19-8C84-B6A7A77A3B25}']

    (*!-------------------------------------------
        * dispatch request
        *--------------------------------------------
        * @param env CGI environment
        * @param stdIn STDIN reader
        * @return response
        *--------------------------------------------*)
    function dispatchRequest(
        const env: ICGIEnvironment;
        const stdIn : IStdIn
    ) : IResponse;
end;
</code></pre></div></div>
<ul>
  <li><code class="highlighter-rouge">env</code>, CGI environment variable that is given by web server.</li>
  <li><code class="highlighter-rouge">stdIn</code>, object which capable of reading STDIN</li>
</ul>

<h2 id="built-in-dispatcher-implementation">Built-in Dispatcher implementation</h2>

<p>Fano Framework comes with two dispatcher implementation, <code class="highlighter-rouge">TSimpleDispatcher</code> and
<code class="highlighter-rouge">TDispatcher</code> class.</p>

<p><code class="highlighter-rouge">TSimpleDispatcher</code> is light-weight dispatcher that does not offer middleware layer
while the latter supports middleware.</p>

<h2 id="creating-dispatcher">Creating dispatcher</h2>

<p>Creating simple dispatcher:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var router : IRouteMatcher;
...
container.add('dispatcher', TSimpleDispatcherFactory.create(router));
</code></pre></div></div>

<p>Creating basic dispatcher with middleware support</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var router : IRouteMatcher;
...
container.add('dispatcher', TDispatcherFactory.create(router));
</code></pre></div></div>

<h2 id="set-dispatcher">Set dispatcher</h2>

<p>Fano Framework allows application to change dispatcher implementation to use and
can be set in <code class="highlighter-rouge">initDispatcher()</code>. In this method implementation, you must returns
instance of dispatcher.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function TMyApp.initDispatcher(const container : IDependencyContainer) : IDispatcher;
begin
    result := container.get('dispatcher') as IDispatcher;
end;
</code></pre></div></div>

<h2 id="explore-more">Explore more</h2>

<ul>
  <li><a href="/working-with-router">Working with Router</a></li>
</ul>

<ul class="actions">
    <li><a href="/documentation" class="button">Documentation</a></li>
</ul>

        </div>
    </section>
</div>


    <!-- Scripts -->
    <script src="/assets/js/jquery.min.js"></script>
    <script src="/assets/js/jquery.scrollex.min.js"></script>
    <script src="/assets/js/jquery.scrolly.min.js"></script>
    <script src="/assets/js/browser.min.js"></script>
    <script src="/assets/js/breakpoints.min.js"></script>
    <script src="/assets/js/util.js"></script>
    <script src="/assets/js/main.js"></script>

</body>
</html>

